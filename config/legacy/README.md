# Config Files

These files contains the descriptions and cutoffs used for the different assays. The files contained within this folder were generated during the preparation of the current repository. High-level instructions on how to generate these files are given here.

## pathogens.csv # TODO

List of pathogens used to create the standard files. If other pathogens are used, consider re-doing the pipeline and adding the necessary fields on the `_manual.csv` files. See notebooks/units.ipynb for more information

## activity_commments.csv

This table was generated by first extracting all the activity comments in ChEMBL with the following query:

```sql
\COPY (
    SELECT
        activity_comment,
        COUNT(*) AS count,
        RANK() OVER (ORDER BY COUNT(*) DESC) AS rank
    FROM
        activities
    GROUP BY
        activity_comment
    ORDER BY
        rank
) TO '/path/to/config/activity_comments.csv' CSV HEADER;
```

Then, we used Llamafile (with Gemma 2 9B instruct) to further annotate the table with 1 (active), -1 (inactive) and 0 (inconclusive). Visual inspection of the results was conducted.

## standard_text.csv

This is a convenient field in the activities table in ChEMBL. This table can be generated as follows:

```sql
\COPY (
    SELECT DISTINCT
        standard_text_value
    FROM
        activities
) TO '/path/to/config/standard_text.csv' CSV HEADER;
```

The table is small. We manually annotated it with active (1), inactive (-1) or inconclusive (0) classifications.

## activity_stds_lookup.csv

This table is an extension of the `activity_stds_lookup` table in ChEMBL, which can be obtained as follows:

```sql
\COPY
    (SELECT
        *
    FROM
        activity_stds_lookup
) TO '/path/to/config/activity_stds_lookup.csv' WITH CSV HEADER;
```

Then, we used again Llamafile to further annotate the table with the direction of the desired activity. A value of 1 means that the higher the the more active. A value of -1 means that the lower the more active. A value of 0 means inconclusive. Pharmacokinetic measurements were preferentially given an inconclusive value.

## activity_std_units.csv

This table contains all the standard units observed in the activities table of the ChEMBL database. It is obtained with the following query:

```sql
\COPY (
    SELECT 
        standard_type, 
        standard_units, 
        COUNT(*) AS count
    FROM 
        activities
    GROUP BY 
        standard_type, 
        standard_units
    ORDER BY 
        count DESC
)
TO '/path/to/config/activity_std_units.csv' WITH CSV HEADER;
```

This table was annotated in several ways to 

The steps to obtain this table are as follows:

### Statis

1. Download the full activities table into the ´tmp´ directory.
2. 





## units.csv and ucum.csv # TODO

The units file contains all the units that appear in the datasets obtained from ChEMBL_33 using the pathogens specified in pathogens.csv. These units have been processed in the [UCUM server](https://ucum.nlm.nih.gov/ucum-lhc/demo.html) to obtain the Unified Code for Units of Measure.
The ucum.csv file, correspondingly, contains the units and its standardisation to ucum units, as well as the necessary conversions to final units, like umol/L. If a unit does not appear in the file, it will not be processed. The units are strings (case sensitive)

## st_type_summary.csv and st_type_summary_manual.csv # TODO
A count of how many standard_type - final_unit combinations exist in the data collected from ChEMBL33 (using the pathogens specified in pathogens.csv). Only combinations with more than 250 instances are considered, and a manual curation has been performed to decide which assays will be used in this pipeline. Simply change the `use` column from 0 to 1 to include a standard_type - final_unit combination, and define its cutoff in the following files. we also include information about the direction of activity (-1 for assays where smaller values are preferred and 1 for assays where larger values are preferred)

## percentiles and cutoffs_manual.csv
The percentiles file contain the percentile distribution of the standard_type - final_unit combinations identified in `st_type_summary_manual.csv`, and whether the cut-off has been defined by expertise or by the percentiles. Final cut-offs can be found on the `cutoffs_manual.csv` file under Low_cut (for a non-stringent activity cut-off) and High_cut (for a more restrictive activity cut-off)